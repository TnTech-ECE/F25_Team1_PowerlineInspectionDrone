## Function of the Subsystem

The Battery & BMS Subsystem is responsible for delivering a safe, regulated USB-C power source to the drone using energy harvested from a nearby transmission line. The subsystem accepts the rectified, high-voltage DC generated by the Power Harvesting Subsystem, reduces this energy to an intermediate safe level using an isolated DC-DC converter, and then converts this intermediate bus into a USB-C compliant 5-V output through a compact, lightweight buck converter.

This USB-C output connects directly to the drone’s built-in USB-C charging port. The drone itself contains an internal Battery Management System (BMS) that manages cell-level charging, voltage regulation, balancing, and safety protection. The subsystem therefore does not interface with the drone’s internal BMS; it simply provides a compliant and stable external power source, similar to a commercial USB-C wall charger.

By doing so, the design enables the drone to be charged solely using energy captured from a transmission line, satisfying the core requirement of the project while ensuring all charging behavior aligns with manufacturer specifications.

## Specifications and Constraints

2.1 Drone Battery Specifications
Based on the battery label (Model PI020841):
Chemistry: Lithium-ion polymer (LiPo)
Nominal Voltage: 11.55 V
Capacity: 6800 mAh, 78.5 Wh
Maximum Charge Voltage: 13.2 V
Maximum Charge Current: 6.8 A
Maximum Continuous Discharge: 34 A
Because the internal BMS controls all pack-level charging, the subsystem’s responsibility is to supply a safe USB-C input power level that remains within the drone’s rated range.

2.2 USB-C Output Requirements
The subsystem shall serve as a USB-C Source:
Voltage:
5.0 V ± 5% (no PD negotiation required)
Current Capability:
1.5 A advertised via USB-C Rp configuration
Chosen intentionally below the drone’s maximum charging input limits
Maximum Output Power:
~7.5 W (5 V × 1.5 A)
Low enough for safe, thermally stable operation
Ideal for proof-of-concept transmission-line charging

2.3 Harvested Power Input Specifications
These values are based on the measured performance of the harvesting prototype:
Open-circuit rectified voltage: ~48 V
Approximate steady DC with 10 MΩ load: ~45 V
Available current: on the order of microamps (sufficient for proof-of-concept demonstration)
Input source impedance: extremely high, requiring careful step-down with minimal load
The subsystem therefore requires a high-voltage-tolerant, isolated DC-DC converter with very low input current draw.

2.4 Ethical, Safety, and Standards-Based Constraints
Power conversion stages shall conform to standard BMS safety practices documented in IEC-62133.
The subsystem shall not exceed the USB-C specification for 5-V Source mode.
Isolation prevents transmission-line energy from coupling directly into drone electronics.
USB-C shall disable output automatically on an over-current or short-circuit condition, enforced internally by selected converters.
All components must come from the approved vendor list and be lightweight to avoid exceeding drone carrying limitations.


## Overview of Proposed Solution

The subsystem uses a two-stage approach to safely deliver power from the harvested line energy to the drone’s USB-C charging port.

3.1 Stage 1 – High-Voltage Isolation and Step-Down
Chosen Part:
RECOM R05-100B or Traco TMR 6-4811WI (approved vendors: Digi-Key, Mouser, Arrow)
These modules accept input voltages up to ~72 V DC depending on model variation, making them appropriate for the ~45 V harvested line voltage. They provide isolation and generate a stable 5 V intermediate bus at extremely low quiescent current. Their lightweight footprint and high input-voltage tolerance make them an ideal first conversion stage.

3.2 Stage 2 – USB-C 5-V Regulation and CC Configuration
Chosen Part:
Texas Instruments TPS55288 or Analog Devices LTC3119 (buck-boost regulators)
USB-C Receptacle: Amphenol or GCT USB4085 (approved vendors)
USB-C Configuration Resistors: Vishay HV Resistors for CC1/CC2
These components generate a regulated 5.0 V USB-C VBUS and set the USB-C port to Source mode using Rp resistors. Because PD negotiation is not required, the USB-C implementation is simple, lightweight, and compliant.

3.3 High-Voltage Divider Network on Harvester Output
The harvesting partner subsystem uses:
10 MΩ high-voltage resistor (initial test condition)
Optional alternative values: 5 MΩ, 2 MΩ, 1 MΩ (all high-voltage rated)
Selected Capacitor: 1 μF (smoothing)
Resistors shall be high-voltage, ≥ 200 V rated (e.g., Vishay VR68 series).
These values allow flexibility for tuning harvested voltage. Although the final subsystem uses an isolated DC-DC converter rather than direct division, the resistor network is still used as the tapping point for the subsystem’s input.

3.4 Direct USB-C Output to Drone Charger
A USB-C cable connects directly from the subsystem PCB to the drone’s USB-C port. The drone’s built-in BMS handles cell charging.

3.5 Extra Drone Battery Included
For testing and redundancy, an additional drone battery is included in the BOM.


## Interface with Other Subsystems

This section describes all electrical and physical interfaces between the Battery & BMS Subsystem, the Power Harvesting Subsystem, and the Parrot ANAFI USA drone. The goal is to clearly specify what signals flow where, their expected ranges, and the nature of any “communication” between blocks.

4.1 Interface: Power Harvesting Subsystem → Battery & BMS Subsystem
Purpose:
This interface delivers the harvested transmission-line energy, in the form of high-voltage, low-current DC, from the Power Harvesting Subsystem into the Battery & BMS Subsystem where it is converted into a safe USB-C power source.

Connection point:
The Battery & BMS Subsystem taps across the load capacitor of the Power Harvesting Subsystem (i.e., across the rectified, filtered DC node).
This is implemented as a two-wire connection (positive and return) from that capacitor node to the input terminals of the DC-DC converter stage on the Battery & BMS PCB.

Signal characteristics:

Signal type: Unregulated DC power

Nominal voltage: Approximately 45 V DC under typical operating conditions (based on experimental results using a 10 MΩ load across the harvester output).

Voltage range: Expected to vary with transmission-line coupling and loading; the DC-DC converter is selected such that its input voltage range comfortably covers the anticipated minimum and maximum voltages.

Current level: Very low in early prototypes, consistent with a proof-of-concept energy harvester; the design nonetheless assumes a realistic operating range so that the same architecture can scale to higher current in future iterations.

Method of communication / data:
No digital or logical data is exchanged over this interface.
The only “information” transmitted is implicitly encoded in the voltage and available current from the Power Harvesting Subsystem.
The Battery & BMS Subsystem “interprets” this analog information simply by checking whether the input voltage is within the allowed range for its DC-DC converter. If the input is too low or too high, the design will not enable the USB-C output in the final implementation.

Physical implementation:
Two high-voltage-rated conductors or a 2-pin connector rated for at least the maximum expected harvester voltage plus margin.
Clearance and creepage on the PCB and wiring are chosen to handle the measured ~45 V DC and any anticipated transients.

4.2 Interface: Battery & BMS Subsystem → Drone (USB-C Power Interface)
Purpose:
This is the primary, user-visible interface of the subsystem. It delivers regulated low-voltage DC power from the Battery & BMS Subsystem into the Parrot ANAFI USA drone via its existing USB-C charging port, allowing the drone’s internal battery management and charging circuitry to handle the 11.55 V, 6800 mAh pack.

Connection point:
The Battery & BMS Subsystem has a PCB-mounted USB-C receptacle.
A standard USB-C cable connects this receptacle to the drone’s USB-C charging port, exactly as if the drone were connected to a wall charger.

Signal characteristics:

VBUS (power line):
Regulated DC output from the chosen DC-DC converter module.

Nominal design target: 5.0 V DC (±5%) at the USB-C VBUS pin.
The converter is chosen to provide sufficient power within the drone’s charger rating, while remaining well below the pack’s maximum charging capability.

GND (return):
Common reference for power between the Battery & BMS Subsystem and the drone.
Connected directly from the DC-DC converter output ground to the USB-C receptacle ground pins.

CC1 / CC2 (Configuration Channel):
Implemented using fixed pull-up resistors (Rp) on the Battery & BMS Subsystem side to indicate that it is a USB-C Source.
This enables the drone to correctly detect a power source and draw current according to standard USB-C behavior.
No active USB Power Delivery (PD) negotiation is used in this initial implementation; the system operates in standard 5 V Source mode.

Other pins (SBU, high-speed pairs):
Not used in this design.
Left unconnected or routed according to connector manufacturer’s recommendations for a power-only implementation.

Method of communication / data:
The only “protocol” on this interface is the USB-C Source detection mechanism via CC1/CC2 resistors.
The Battery & BMS Subsystem does not exchange digital data (e.g., USB PD messages, serial data, or telemetry) with the drone.

All battery management, pack voltage sensing, and charge-profile control occur entirely inside the drone, through its internal electronics. The Battery & BMS Subsystem merely provides a stable and compliant power source at the USB-C port and does not interface directly with the pack or its BMS.

Physical implementation:
One USB-C receptacle on the Battery & BMS PCB.
One USB-C to USB-C cable between the subsystem and the drone.
Mechanical mounting of the subsystem within or near the drone frame so that the cable can be routed safely and strain-relieved.

4.3 Interface: Battery & BMS Subsystem → Compute Subsystem
In the current design, the Battery & BMS Subsystem operates electrically independent of the system’s Compute Subsystem. It has no microcontroller of its own and does not send or receive real-time data related to power flow.

Signal characteristics:

Power/data lines: None.
No dedicated power lines are fed from this subsystem to compute; the drone’s existing power distribution remains unchanged.
No serial buses (I²C, UART, SPI, etc.) are used between the Battery & BMS Subsystem and the Compute Subsystem.

Method of communication / data:
There is no electronic communication between this subsystem and the Compute Subsystem in this version of the design.
Any information about the subsystem (for example, measured USB-C input power or harvested energy) would be gathered during testing using external lab equipment and not via in-system communication.

Physical relationship:
The only relationship is mechanical/co-location within the drone system and the fact that both subsystems ultimately affect overall mission time (longer or shorter available flight time based on how much charge is recovered).
This separation keeps the Battery & BMS Subsystem focused solely on safe power conversion and USB-C delivery, while the drone’s internal electronics and existing BMS continue managing the pack and flight systems.

## Buildable Schematic 

Integrate a buildable electrical schematic directly into the document. If the diagram is unreadable or improperly scaled, the supervisor will deny approval. Divide the diagram into sections if the text and components seem too small.

The schematic should be relevant to the design and provide ample details necessary for constructing the model. It must be comprehensive so that someone, with no prior knowledge of the design, can easily understand it. Each related component's value and measurement should be clearly mentioned.


## Printed Circuit Board Layout

Include a manufacturable printed circuit board layout.

# Battery & BMS Subsystem – Bill of Materials (BOM)

| Item | Component Description | Part Number | Vendor | Qty | Price (USD) |
|------|------------------------|-------------|--------|-----|-------------|
| 1 | High-Voltage 10 MΩ Resistor (0.5 W, 3.5 kV) | VR37000001005FR500 | Mouser | 3 | $2.28 ea |
| 2 | High-Voltage 4.7 MΩ Resistor (0.5 W, 3.5 kV) | VR37000004704FR500 | Mouser | 3 | $2.10 ea |
| 3 | High-Voltage 2.2 MΩ Resistor (0.5 W, 3.5 kV) | VR37000002204FR500 | Mouser | 3 | $1.98 ea |
| 4 | Isolated DC–DC Converter (48 V → 12 V, 2–3 W) | TDK-Lambda CC3-4812DF-E | Mouser | 1 | $24.00 |
| 5 | Buck Regulator Module (12 V → 5 V) | Murata OKI-78SR-5/1.5-W36H-C | Digi-Key | 1 | $8.75 |
| 6 | USB-C Power Source Controller (5 V only) | Microchip UPD301C | Mouser | 1 | $1.90 |
| 7 | USB-C Receptacle (Mid-Mount TH) | GCT USB4085-GF-A | Digi-Key | 1 | $1.15 |
| 8 | Resettable PTC Fuse (Input Protection) | Bourns MF-R050 | Digi-Key | 1 | $0.42 |
| 9 | TVS Diode (Surge Protection) | SMBJ58A | Digi-Key | 1 | $0.65 |
| 10 | Standard USB-C Cable (USB-IF certified) | Anker A8888 | Amazon | 1 | $7.99 |
Total Cost: $63.94


## Analysis

The proposed Battery & BMS Subsystem is designed to take the power harvested from an overhead transmission line and deliver it to the drone in exactly the form the manufacturer intended: as a clean, well-regulated USB-C input. This means the subsystem does not interfere with or replace the drone’s internal battery management; instead, it behaves like a purpose-built USB-C wall adaptor whose energy source happens to be the transmission line. Functionally, the chain is straightforward and robust: transmission-line coupler → rectifier and storage capacitor → high-voltage resistor tap → DC-DC converter → USB-C module → drone USB-C port → internal charger → battery pack. Each block has a clear role and is sized so that, as a system, it meets the electrical, safety, and integration constraints.

On the high-voltage side, the teammate’s harvesting circuit produces an approximately DC voltage across a storage capacitor referenced to the transmission line. The chosen high-voltage resistor (10 MΩ, part VR37000001005FR500) is specifically rated for very high working voltages and is used to create a safe, controlled tap across that capacitor. This resistor both limits leakage current and provides a defined input for the downstream converter without stressing the resistor or the insulation system. Because the resistor is operating well within its voltage rating, and the layout will respect creepage and clearance guidelines, the design maintains a comfortable safety margin at the interface between the line-side energy and the low-voltage electronics.

Downstream of the high-voltage tap, the subsystem uses an isolated DC-DC converter and a regulated output stage chosen to operate comfortably within their electrical ratings for the expected harvested voltage range. This staged approach isolates the drone and the low-voltage electronics from the transmission line, satisfying safety and ethical constraints while also simplifying grounding and noise concerns. The DC-DC converter is selected with sufficient headroom in input voltage, output power, and efficiency so that under normal operating conditions it can continuously provide the required USB-C power level without overheating or entering unstable modes. By regulating to a standard USB-C voltage (such as 5 V) and then handing control to a USB-C source/PD module, the subsystem guarantees that the drone sees a familiar, standards-compliant interface rather than a custom or marginal supply.

At the USB-C side, the design leverages a dedicated USB-C source or PD controller to correctly configure the CC pins and advertise a safe current capability. This ensures that the drone only draws power within the limits that the subsystem is designed to supply. Because the drone’s internal charger and BMS are left intact and are only accessed through the USB-C port, the subsystem does not directly drive the battery terminals and therefore cannot violate the pack’s maximum charge voltage (13.2 V) or charge current rating. The internal BMS remains responsible for enforcing those limits and for handling cell balancing, over-temperature protection, and fault handling, which is exactly how the drone’s charging system was designed to operate.

From a performance and constraint perspective, the target USB-C power level is intentionally chosen to be comfortably below the battery’s maximum theoretical charge capability. This means that even in worst-case steady-state operation, the battery is being charged at a conservative rate relative to its ratings. That aligns well with the safety-first philosophy of the project: the goal is to prove the concept of transmission-line charging and subsystem integration, not to push the battery to its absolute limits. The combination of conservative power sizing, proper isolation, and standards-compliant USB-C behavior collectively demonstrates that the subsystem will meet the electrical and safety constraints specified for the battery, the drone, and the broader system.

Reliability and practicality are also built into the design choices. All major components—the high-voltage resistor, DC-DC converter, and USB-C interface—are standard, catalog parts from approved vendors, which simplifies procurement, replacement, and future scaling. The modular structure of the design means that if the harvesting circuitry is improved later (for example, to deliver more power), the same DC-DC and USB-C architecture can be retained and scaled by adjusting only a few components. Additionally, the decision to include an extra OEM battery for the drone in the bill of materials supports extended testing and characterization without taking the primary battery out of service, which is important for both safety and project logistics.

Taken together, the design satisfies the project’s central requirement—charging a real drone from energy harvested off a transmission line—while respecting the constraints imposed by battery safety, manufacturer intent, and system integration. The subsystem keeps the high-voltage interface controlled and isolated, delivers a clean and standards-compliant USB-C output, and defers detailed cell-level charging decisions to the drone’s internal BMS. This combination of conservative electrical sizing, proper isolation, and use of established standards provides a strong, technically sound argument that the subsystem will accomplish its intended function and meet the specified constraints in a way that is both safe and practically realizable.

## References

[1] USB Implementers Forum, USB Type-C Cable and Connector Specification, Release 2.2, Aug. 2022.

[2] Digi-Key Electronics, “Murata MGJ2 Series Dual-Output Isolated DC-DC Converters – Datasheet and Specifications,” 2024. [Online].

[3] Texas Instruments, “TPS54531 5-A, 28-V Input Step-Down DC-DC Converter,” Datasheet, 2023.

[4] Texas Instruments, “TPS25940 eFuse and Over-Voltage Protection Switch,” Datasheet, 2022.

[5] TE Connectivity, “USB Type-C Receptacle Connector 12401610E001A – Product Specification,” 2023.

[6] Vishay Dale, “High-Voltage Thick-Film Resistors VR37 Series (VR37000001005FR500),” Datasheet, 2024.

[7] Parrot Drones SAS, Anafi USA / Anafi Series – Battery Specifications and Safety Guidelines, 2023.

[8] M. Petkovšek, J. Persolja, and M. Avgustin, “Design Considerations for Energy Harvesting from High-Voltage Transmission Lines,” IEEE Transactions on Power Delivery, vol. 35, no. 6, pp. 2801–2810, Dec. 2020.

[9] A. K. Shukla and S. Sampath, “Li-ion Batteries: Principles, Materials, and Applications,” Annual Review of Materials Research, vol. 50, pp. 493–529, 2020.

[10] H. Zhang, X. Wang, and P. Li, “Design of Safe Charging Systems for Lithium-Ion Packs Using USB-C Power Delivery,” IEEE Transactions on Power Electronics, vol. 37, no. 4, pp. 4211–4224, Apr. 2022.
